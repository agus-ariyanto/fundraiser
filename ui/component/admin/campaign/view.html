<div  ng-show="step==0">
    <div class="text-end mb-3">
        <button type="button" class="btn btn-outline-secondary" ng-click="add()">
            <span class="fa fa-plus"></span>
        </button>
    </div>
    <div ng-repeat="c in table">
        <div class="{{c.theme_bgtxt}} py-3">
            <h4 class="text-center mb-3">{{c.title}}</h4>
            <div class="row">
                <div class="col" ng-repeat="cc in c.picture" ng-click="showImage(c)">
                    <img src="api/{{cc.image}}" style="width:100%">
                </div>
            </div>


            <div class="p-3" ta-bind ng-model="c.content"> </div>
        </div>

        <div class="row g-3 py-3">
            <div class="col-6 px-2">
                <div class="col mb-3 rounded border {{c.theme_border}} p-2">
                    <div class="">Goal</div>
                    <div class="{{c.theme_bgtxt}} rounded border {{c.theme_border}} p-1">Rp. {{helper.toCurrency(c.goal)}}</div>
                </div>
            </div>
            <div class="col-6 px-2">
                <div class="col mb-3 rounded border {{c.theme_border}} p-2">
                    <div class="">Terkumpul</div>
                    <div class="{{c.theme_bgtxt}} rounded border {{c.theme_border}} p-1">Rp. {{helper.toCurrency(c.amount)}}</div>
                </div>
            </div>
            <div class="col-6 px-2">
                <div class="col mb-3 rounded border {{c.theme_border}} p-2">
                    <div class="">Rekening</div>
                    <div class="{{c.theme_bgtxt}} rounded border {{c.theme_border}} p-1">{{c.rek_rekno}} {{c.rek_bank}} {{c.an}}</div>
                </div>
            </div>
            <div class="col-6 px-2">
                <div class="col mb-3 rounded border {{c.theme_border}} p-2">
                    <div class="">Contact</div>
                    <div class="{{c.theme_bgtxt}} rounded border {{c.theme_border}} p-1">{{c.contact_phone}} {{c.contact_name}} {{c.contact_email}}</div>
                </div>
            </div>
            <div class="col-6 px-2">
                <div class="col mb-3 rounded border {{c.theme_border}} p-2">
                    <div class="">Mulai</div>
                    <div class="{{c.theme_bgtxt}} rounded border {{c.theme_border}} p-1">{{helper.toFormat(c.start)}}</div>
                </div>
            </div>
            <div class="col-6 px-2">
                <div class="col mb-3 rounded border {{c.theme_border}} p-2">
                    <div class="">Berakhir</div>
                    <div class="{{c.theme_bgtxt}} rounded border {{c.theme_border}} p-1">{{helper.toFormat(c.stop)}}</div>
                </div>
            </div>
        </div>
        <div class="text-end mb-3 py-3">
            <button type="button" class="btn btn-outline-success btn-sm" ng-click="rilis(c)">
                <span class="fa fa-paper-plane"></span>&nbsp;&nbsp;Rilis
            </button>
            <button type="button" class="btn btn-outline-dark btn-sm" ng-click="draft(c)">
                <span class="fa fa-file"></span>&nbsp;&nbsp;Draft
            </button>
            <button type="button" class="btn btn-outline-primary btn-sm" ng-click="edit(c)">
                <span class="fa fa-edit"></span>&nbsp;&nbsp;Edit
            </button>
            <button type="button" class="btn btn-danger btn-sm" ng-click="close(c)">
                <span class="fa fa-briefcase"></span>&nbsp;&nbsp;Close
            </button>
        </div>

    </div>
</div>

<form class="px-2" ng-show="step==1" ng-submit="submit()">
    <div class="separator-double"></div>
    <div class="row mb-3">
        <div class="col">
            <div class="form-floating mb-3">
                <input id="title" type="text" class="form-control" ng-model="data.title">
                <label for="title">Title</label>
            </div>
        </div>
        <div class="col">
            <div class="form-floating mb-3">
                <select id="theme" class="form-select" ng-model="data.theme_id" ng-options="e.id as e.title for e in theme">
                    <option style="display:none"></option>
                </select>
                <label for="title">Theme</label>
            </div>
        </div>
    </div>

    <div class="row mb-3">
        <div class="col">
            <div class="form-floating">
                <input id="goal" type="text" class="form-control" ng-model="data.goal_number">
                <label for="goal">Goal</label>
            </div>
        </div>
        <div class="col">
            <div class="form-floating">
                <input id="start" type="text" ng-model="data.tanggal_start" class="form-control form-control-sm" date-time
                auto-close="true" view="date" min-view="date" max-view="year"
                format="dd MMM yyyy" watch-direct-changes placeholder="Tanggal Mulai">
                <label for="start">Start</label>
            </div>
        </div>
        <div class="col">
            <div class="form-floating">
                <input id="stop" type="text" ng-model="data.tanggal_stop" class="form-control form-control-sm" date-time
                auto-close="true" view="date" min-view="date" max-view="year"
                format="dd MMM yyyy" watch-direct-changes placeholder="Tanggal Berakhir">
                <label for="stop">Stop</label>
            </div>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col">
            <div class="form-floating">
                <select  id="rekening" class="form-select" ng-model="data.rek_id" ng-options="r.id as r.bank+' '+r.rekno for r in rek">
                    <option style="display:none"></option>
                </select>
                <label for="rekeningt">Rekening</label>
            </div>
        </div>
        <div class="col">
            <div class="form-floating">
                <select  id="contact" class="form-select" ng-model="data.contact_id" ng-options="o.id as o.name+' '+o.phone for o in contact">
                    <option style="display:none"></option>
                </select>
                <label for="contact">Contact</label>
            </div>
        </div>
    </div>
    <div class="mb-3">
        <text-angular
            ng-model="data.content"
            ta-toolbar="[['bold','italics','clear'],['justifyLeft','justifyCenter','justifyRight','justifyFull'],['ul','ol']]"
            ta-toolbar-class="mb-3"
            ta-toolbar-group-class="btn-group px-2"
            ta-toolbar-button-class="btn btn-outline-secondary pointer"
            ta-toolbar-active-button-class="active"
            class="form-editor">
        </text-angular>

        </div>
    </div>
    <input type="file" name="photo_upload"
        onchange="angular.element(this).scope().pictureOnChange(this)"
        accept="image/xpng, image/jpeg"
        style="display: none;"
        id="photo-upload">

    <div class="mb-3">
        <button type="button" class="btn btn-outline-secondary" ng-click="uploadPicture()">
            <span class="fa fa-plus"></span>&nbsp;&nbsp;image
        </button>

        <div class="row">
            <div class="col-md-2 col-3" ng-repeat="p in data.picture">
                <div class="text-end mb-1">
                    <button type="button" class="btn btn-danger btn-sm" ng-click="delPicture(p)">
                        <span class="fa fa-times"></span>
                    </button>
                </div>
                <img src="api/{{p.image}}" class="img-fluid">
            </div>
        </div>
    </div>
    <div class="p-3 border-top text-end">
        <button type="button" class="btn btn-light" ng-click="step=0">Cancel</button>
        &nbsp;&nbsp;&nbsp;&nbsp;
        <button type="submit" class="btn btn-primary">Save ( as Draft )</button>
    </div>
</form>
